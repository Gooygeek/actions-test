name: hello-world
on: push
jobs:
  my-job:
    runs-on: special-k
    container:
      image: ubuntu:22.04
    env:
      GITHUB_TOKEN: ${{ github.token }}
    permissions:
      contents: 'read'
      id-token: 'write'
    steps:
      - name: my-step
        run: |
          echo "Hello, World!" | tee helloworld.txt
      - name: print envs
        run: |
          cat helloworld.txt
          echo "pre-job envs"
          if [ -f "/home/runner/pre-job-envs.txt" ]; then
              cat /home/runner/pre-job-envs.txt
          else
              echo "file does not exist"
          fi
          echo "---------------------------------------"
          echo "id-jwt"
          # cat /home/runner/id-jwt.json
          echo "---------------------------------------"
          echo "pre-job-event-details"
          if [ -f "/home/runner/pre-job-event-details.txt" ]; then
              cat /home/runner/pre-job-event-details.txt
          else
              echo "file does not exist"
          fi
          echo "---------------------------------------"
          echo "Local Envs"
          env | sort
      - name: my-step2
        shell: bash # required as it defaults to `sh` when run in a container. This breaks bashisms that may be assumed
        run: |
          for i in {1..30}; do
            echo "${i} - Good Bye, Cruel World!"
            sleep 1
          done